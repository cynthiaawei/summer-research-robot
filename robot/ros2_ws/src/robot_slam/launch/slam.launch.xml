<launch>
  <!-- Existing robot display -->
  <include file="$(find-pkg-share my_robot_description)/launch/display.launch.xml"/>

  <!-- RPLidar C1 -->
  <include file="$(find-pkg-share rplidar_ros)/launch/view_rplidar_c1_launch.py"/>

  <!-- SLAM Toolbox: continue mapping on top of a loaded graph -->
  <node pkg="slam_toolbox" exec="async_slam_toolbox_node"
        name="slam_toolbox" output="screen">

    <!-- Frames / topics -->
    <param name="map_frame"  value="map"/>
    <param name="odom_frame" value="odom"/>
    <param name="base_frame" value="base_footprint"/>
    <param name="scan_topic" value="/scan"/>

    <!-- Mapping mode (not localization) -->
    <param name="mode" value="mapping"/>

    <!-- Typical mapping params -->
    <param name="resolution" value="0.05"/>
    <param name="max_laser_range" value="12.0"/>
    <param name="minimum_time_interval" value="0.1"/>
    <param name="minimum_travel_distance" value="0.0"/>
    <param name="minimum_travel_heading" value="0.0"/>
    <param name="tf_buffer_duration" value="30.0"/>
    <param name="transform_timeout" value="0.2"/>
    <param name="use_sim_time" value="false"/>

    <!-- Load previous serialized pose-graph on startup (NO extension) -->
    <param name="map_file_name"
           value="/home/jenny/summer-research-robot/robot/ros2_ws/v1"/>

    <!-- Start aligned to the map's dock (first node) so orientation matches -->
    <param name="map_start_at_dock" value="true"/>

    <!-- If you ever want to start at an explicit pose instead, comment the line above
         and uncomment the one below (x, y, theta in radians in the MAP frame):
    <param name="map_start_pose" value="[0.0, 0.0, 0.0]"/>
    -->
  </node>

</launch>

